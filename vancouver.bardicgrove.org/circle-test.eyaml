---
role: role::allinone

# use letsencrypt staging for now
acme::certificate::letsencrypt_ca: staging

dovecot::plugins:
  - imap
  - lmtp
  - pop3
  - sieve
dovecot::config:
  protocols: imap lmtp pop3 sieve
  hostname: 'mail.bardicgrove.org'
dovecot::configs:
  '10-auth':
    disable_plaintext_auth: 'yes'
    passdb:
      driver: pam
    userdb:
      driver: passwd
  '10-ssl':
    ssl: 'required'
    ssl_cert: '</etc/acme.sh/certs/mail.bardicgrove.org/fullchain.pem'
    ssl_key: '</etc/acme.sh/keys/mail.bardicgrove.org/private.key'
